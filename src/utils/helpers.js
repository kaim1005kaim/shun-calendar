/**
 * ユーティリティ関数
 */

// 日付をフォーマット
export const formatDate = (date) => {
  return date.toLocaleDateString('ja-JP', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    weekday: 'long'
  });
};

// 食材のサムネイル絵文字を取得する関数
export const getThumbnail = (item, category) => {
  const thumbnails = {
    dish: {
      'おでん': '🍢', '鍋料理': '🍲', '湯豆腐': '🍲', '粕汁': '🍲', '雑煮': '🍜', '七草粥': '🍚',
      '鰤大根': '🐟', '蒸し牡蠣': '🦪', '河豚ちり': '🐡', '金目鯛の煮付け': '🐟',
      '恵方巻': '🍣', 'ちらし寿司': '🍣', '鰤の照り焼き': '🐟', '牡蠣フライ': '🦪',
      '筍ご飯': '🍚', '桜餅': '🌸', '蛤のお吸い物': '🍲', '菜の花のおひたし': '🥬',
      '山菜の天ぷら': '🍤', 'そらまめご飯': '🍚', '鰆の塩焼き': '🐟', '初鰹のたたき': '🐟',
      '鮎の塩焼き': '🐟', '鱧の湯引き': '🐟', '冷奴': '🧊', '冷やし中華': '🍜',
      'きゅうりの酢の物': '🥒', 'トマトサラダ': '🍅', '枝豆': '🫛', 'とうもろこしご飯': '🌽',
      'アスパラガスとベーコンの炒め物': '🥓', '新たまねぎのサラダ': '🧅', '新じゃがの味噌汁': '🍲', 
      'アスパラガスの胡麻和え': '🥒', '鰹の刺身': '🐟', '鰎の天ぷら': '🍤',
      '鰻の蒲焼き': '🐟', '冷やしそうめん': '🍜', 'ゴーヤチャンプルー': '🥬',
      '秋刀魚の塩焼き': '🐟', '戻り鰹のたたき': '🐟', '栗ご飯': '🌰', 'きのこご飯': '🍄',
      'さつまいもの天ぷら': '🍠', '里芋の煮っころがし': '🥔', 'かぼちゃの煮物': '🎃',
      '松茸の土瓶蒸し': '🍄', '鮭のちゃんちゃん焼き': '🐟', 'なすの味噌炒め': '🍆',
      '鮭の塩焼き': '🐟', '鰯の梅煮': '🐟', '牡蠣鍋': '🦪', '年越しそば': '🍜'
    },
    fish: {
      '鰤（ぶり）': '🐟', '鱈（たら）': '🐟', '牡蠣（かき）': '🦪', '河豚（ふぐ）': '🐡',
      '鮟鱇（あんこう）': '🐟', '金目鯛（きんめだい）': '🐟', 'ヒラメ': '🐟', 'ハマチ': '🐟',
      'マグロ': '🐟', '甘海老': '🦐', '真鯛（まだい）': '🐟', '桜鯛（さくらだい）': '🐟',
      '蛤（はまぐり）': '🐚', '白魚（しらうお）': '🐟', '鰆（さわら）': '🐟', 'メバル': '🐟',
      'カレイ': '🐟', 'スズキ': '🐟', 'ひじき': '🌿', '初鰹（はつがつお）': '🐟',
      '鯵（あじ）': '🐟', 'アサリ': '🐚', '鰈（かれい）': '🐟', '鱚（きす）': '🐟',
      '鮎（あゆ）': '🐟', 'カンパチ': '🐟', 'ホタテ': '🐚', 'イサキ': '🐟',
      '太刀魚（たちうお）': '🐟', '鱧（はも）': '🐟', '鰻（うなぎ）': '🐟', 'アナゴ': '🐟',
      'イワシ': '🐟', 'キス': '🐟', '穴子（あなご）': '🐟', '鯖（さば）': '🐟',
      'アジ': '🐟', '蛸（たこ）': '🐙', '鮪（まぐろ）': '🐟', '鯛（たい）': '🐟',
      'カマス': '🐟', '秋刀魚（さんま）': '🐟', '戻り鰹（もどりがつお）': '🐟',
      '鮭（さけ）': '🐟', 'ハゼ': '🐟', '鰯（いわし）': '🐟', 'サンマ': '🐟',
      'ししゃも': '🐟', 'ハタハタ': '🐟', 'スルメイカ': '🦑', 'ズワイガニ': '🦀',
      'ホタルイカ': '🦑', 'ワカサギ': '🐟', 'ヤリイカ': '🦑'
    },
    vegetable: {
      '白菜': '🥬', '大根': '🥕', '人参': '🥕', 'ごぼう': '🪴', 'れんこん': '🪴',
      '春菊': '🥬', 'ほうれん草': '🥬', '小松菜': '🥬', 'ネギ': '🌿', '水菜': '🥬',
      'カブ': '🪴', 'セリ': '🌿', 'ブロッコリー': '🥦', 'カリフラワー': '🥦',
      'キャベツ': '🥬', '菜の花': '🌼', '春キャベツ': '🥬', '新玉ねぎ': '🧅',
      'ふき': '🌿', 'たらの芽': '🌿', 'わらび': '🌿', '筍（たけのこ）': '🎋',
      'そらまめ': '🫛', '新じゃがいも': '🥔', 'アスパラガス': '🥒', '三つ葉': '🌿',
      '新人参': '🥕', 'レタス': '🥬', 'セロリ': '🥬', '山菜': '🌿',
      'スナップエンドウ': '🫛', 'グリーンピース': '🫛', '新ごぼう': '🪴',
      'きゅうり': '🥒', 'トマト': '🍅', 'なす': '🍆', 'ピーマン': '🌶️',
      'いんげん': '🫛', 'オクラ': '🌿', 'ズッキーニ': '🥒', '枝豆': '🫛',
      'とうもろこし': '🌽', '新生姜': '🫚', 'らっきょう': '🧅', 'みょうが': '🌿',
      'かぼちゃ': '🎃', 'ゴーヤ': '🥒', 'シソ': '🌿', '冬瓜': '🥒',
      'さつまいも': '🍠', '里芋': '🥔', '栗': '🌰', 'きのこ類': '🍄',
      '新米': '🌾', 'チンゲン菜': '🥬', '長ネギ': '🌿', '生姜': '🫚',
      'ナス': '🍆', '柿': '🟠'
    }
  };
  
  return thumbnails[category]?.[item] || (category === 'dish' ? '🍽️' : category === 'fish' ? '🐟' : '🥬');
};

// 時間帯情報を取得する関数
export const getTimeOfDayInfo = () => {
  const hour = new Date().getHours();
  
  if (hour >= 5 && hour < 10) {
    return { period: '朝', icon: '🌅', class: 'morning' };
  } else if (hour >= 10 && hour < 15) {
    return { period: '昼', icon: '☀️', class: 'afternoon' };
  } else if (hour >= 15 && hour < 18) {
    return { period: '夕方', icon: '🌇', class: 'evening' };
  } else if (hour >= 18 && hour < 23) {
    return { period: '夜', icon: '🌙', class: 'night' };
  } else {
    return { period: '深夜', icon: '🌌', class: 'midnight' };
  }
};

// クックパッドのURLを生成する関数
export const generateIngredientCookpadUrl = async (ingredientName) => {
  try {
    // 食材名をクリーンアップ（括弧内の読み方を除去など）
    const cleanIngredient = ingredientName
      .replace(/（.*?）/g, '') // 括弧内の読み方を除去
      .replace(/[()]/g, '') // 英語括弧も除去
      .trim();
    
    console.log('🍳 食材ベースクックパッド検索:', {
      元の食材名: ingredientName,
      検索キーワード: cleanIngredient
    });
    
    return `https://cookpad.com/search/${encodeURIComponent(cleanIngredient)}`;
  } catch (error) {
    console.log('⚠️ 食材URL生成エラー:', error);
    return `https://cookpad.com/search/${encodeURIComponent(ingredientName)}`;
  }
};
